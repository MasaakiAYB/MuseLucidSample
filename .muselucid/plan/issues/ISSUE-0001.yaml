id: ISSUE-0001
title: 概要ヒアリング結果を要件仕様へ落とし込む
summary: |-
  営業アシスタント2名が受注メール内容を基幹システムへ手入力している現状を改善する。
  平日1日約120件の受注処理で発生している遅延と転記ミスを削減するため、
  メール受信後に自動登録し、担当者は確認のみで完了できるMVPの要件を定義する。
scope:
  - "背景(As-Is): 営業アシスタント2名が受注メールを基幹システムへ手入力しており、平日1日約120件の処理で遅延と転記ミスが毎週発生している。"
  - "目標(To-Be): メール受信後に受注情報が自動登録され、担当者は確認作業のみで処理を完了できる。"
  - "対象ユーザー: 営業アシスタント2名"
  - "業務フロー(As-Is): 受注メール受信 -> 担当者が手入力 -> 登録結果を目視確認"
  - "業務フロー(To-Be): 受注メール受信 -> システムが自動登録APIを実行 -> 担当者が結果(成功/失敗)を確認"
  - "FR-01 必須チェック: 入力データで受注番号または顧客コードが欠ける場合、登録処理を中断し保存しない。画面には必須項目不足エラーを表示する。"
  - "FR-02 重複チェック: 受注番号が既存データと一致する場合、登録処理を中断し保存しない。画面には重複警告を表示する。"
  - "FR-03 成功応答: 登録成功時は reception_id と processed_at を必須項目として返却する。processed_at は ISO 8601 形式(UTC)で返却する。"
  - "FR-04 タイムアウト: API応答が10秒を超えた場合はタイムアウトとして扱い、画面に再実行導線(再試行操作)を表示する。"
  - "API契約: 正常時HTTP 201、必須エラーHTTP 400、重複エラーHTTP 409、タイムアウトHTTP 504を返却する。"
  - "エラー契約: 失敗時レスポンスは code, message, retriable の3項目を返却し、retriable はタイムアウト時のみ true とする。"
non_goals:
  - 受注取込画面/API/DBの実装コード作成
  - Slack通知や運用設計の詳細実装
  - リリース判定および総合テスト実施
constraints:
  - API応答が10秒を超えた場合はタイムアウトとして扱う
acceptance_criteria:
  - As-IsとTo-Beが分離され、対象ユーザー・現状課題・目標状態に矛盾がないことをレビューでYes/No判定できる。
  - FR-01からFR-04に入力条件・判定・保存可否・UI表示/API応答が明記され、追加ヒアリングなしで実装着手できる。
  - 成功/失敗/タイムアウトのAPI契約(HTTPステータス・返却項目・再実行可否)が定義されている。
  - タイムアウト10秒ルールが scope と constraints の双方で一致している。
verify:
  - 要件レビューで曖昧語が残っていないことを確認する
  - FRごとに正常系/異常系/境界値(10秒ちょうど、10秒超)の検証観点が1件以上あることを確認する
risk: medium
labels:
  - agent-task
  - agent-ready
depends_on: []
