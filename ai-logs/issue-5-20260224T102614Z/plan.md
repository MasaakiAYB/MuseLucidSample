**1. スコープ（対象/対象外）**

**対象**
- `.muselucid/plan/specs/ISSUE-0001-requirements.md` を、Issue本文に基づくMVP要件仕様として完成させる
- 対象ユーザー・現状課題・目標状態（処理完了率95%以上）の整合を明文化する
- 以下の機能要件を実装可能粒度で定義する  
  `必須チェック（受注番号/顧客コード）`、`重複チェック`、`成功時返却（受付ID/処理時刻）`、`10秒タイムアウトと再実行導線`、`一覧画面ステータス件数表示`
- 制約条件（PIIマスキング、DBスキーマ不変更、2か月以内導入）を要件に反映する
- 受け入れ基準と検証観点をレビュー可能な形式で記述する

**対象外**
- モバイルアプリ対応
- AIによる需要予測分析
- 実装コード変更（API/画面/DBの実装）は本Issueでは行わない

---

**2. 実装手順（番号付き、各手順に完了条件）**

1. Issue情報と既存仕様の差分確認を行う  
完了条件: Issue本文の全要求がチェックリスト化され、既存仕様との差分が列挙されている

2. 要件仕様の章立てを確定する（背景、ユーザー課題目標、スコープ、FR/NFR、制約、AC、検証）  
完了条件: 章構成が確定し、欠落セクションがない

3. 機能要件を `入力/判定条件/処理/出力/エラー時挙動` の5観点で記述する  
完了条件: FR-01〜FR-05の各要件に5観点が揃い、実装時の解釈が一意になる

4. 非機能要件・制約条件を明文化する  
完了条件: `10秒タイムアウト`、`再実行可能性`、`追跡性`、`PIIマスキング`、`DBスキーマ不変更`、`2か月導入制約` が記載済み

5. 受け入れ基準（DoD）と検証項目をテスト可能表現へ変換する  
完了条件: 各ACが Given/When/Then または同等の判定可能形式で記載されている

6. トレーサビリティ（課題↔要件↔受け入れ基準↔検証）を作成する  
完了条件: 各課題が最低1つのFR/AC/検証項目に紐づいている

7. 曖昧表現レビューを実施し、最終版を確定する  
完了条件: 主観語・未定義語が除去され、レビュー指摘なしで合意可能な状態

---

**3. リスクと対策**

- リスク: 要件が抽象的で実装解釈が分岐する  
対策: すべてのFRを5観点テンプレートで記述し、エラーコード/画面文言まで固定する

- リスク: KPI（95%以上）の測定定義が曖昧になる  
対策: 分母・分子・測定時間帯を仕様に明記する

- リスク: 制約漏れ（PII、DB不変更、期限）が後工程で発覚する  
対策: 制約章を独立させ、各FRに影響箇所を明示する

- リスク: 一覧画面の受け入れ条件が不足し、検証不能になる  
対策: ステータス分類と件数表示条件をACとして明文化する

---

**4. 検証計画（実行コマンドと期待結果）**

```bash
# 1) 対象仕様ファイルの存在確認
test -f .muselucid/plan/specs/ISSUE-0001-requirements.md && echo OK

# 2) 必須機能要件（FR-01〜FR-05）が定義されていること
rg '^### FR-0[1-5]' .muselucid/plan/specs/ISSUE-0001-requirements.md | wc -l

# 3) 各FRに5観点（入力/判定条件/処理/出力/エラー時挙動）が含まれること
rg '入力:|判定条件:|処理:|出力:|エラー時挙動:' .muselucid/plan/specs/ISSUE-0001-requirements.md | wc -l

# 4) 制約条件が記載されていること
rg '個人情報は保存前にマスキング|DBスキーマは変更しない|2か月以内に本番導入' .muselucid/plan/specs/ISSUE-0001-requirements.md

# 5) 受け入れ基準がDoDを満たす記述になっていること
rg 'AC-01|AC-02|対象ユーザー・課題・目標|実装粒度' .muselucid/plan/specs/ISSUE-0001-requirements.md
```

期待結果:
- コマンド1: `OK` が出力される
- コマンド2: `5` が出力される
- コマンド3: `25` 以上（5要件×5観点）になる
- コマンド4: 3制約すべてがヒットする
- コマンド5: DoDに対応するAC記述がヒットする